# Configuration de production
spring.profiles.active=production

# JWT Configuration
jwt.secret=${JWT_SECRET:myVerySecureSecretKeyThatIsAtLeast256BitsLongForHS256Algorithm}
jwt.expiration=86400000
jwt.refresh-expiration=604800000

# Database Configuration
spring.datasource.url=${DATABASE_URL:jdbc:mysql://database:3306/phone_book}
spring.datasource.username=${DATABASE_USERNAME:kvill}
spring.datasource.password=${DATABASE_PASSWORD}

# JPA Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Logging Configuration
logging.level.bf.kvill.spring_phone_book=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate=WARN

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# Security Headers
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.jedis.pool.max-active=8
spring.data.redis.jedis.pool.max-idle=8
spring.data.redis.jedis.pool.min-idle=0

# Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.contact-service.register-health-indicator=true
resilience4j.circuitbreaker.instances.contact-service.sliding-window-size=10
resilience4j.circuitbreaker.instances.contact-service.minimum-number-of-calls=5
resilience4j.circuitbreaker.instances.contact-service.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.contact-service.wait-duration-in-open-state=30s
resilience4j.circuitbreaker.instances.contact-service.permitted-number-of-calls-in-half-open-state=3

resilience4j.circuitbreaker.instances.search-service.register-health-indicator=true
resilience4j.circuitbreaker.instances.search-service.sliding-window-size=10
resilience4j.circuitbreaker.instances.search-service.minimum-number-of-calls=3
resilience4j.circuitbreaker.instances.search-service.failure-rate-threshold=60
resilience4j.circuitbreaker.instances.search-service.wait-duration-in-open-state=20s

# Retry Configuration
resilience4j.retry.instances.contact-service.max-attempts=3
resilience4j.retry.instances.contact-service.wait-duration=1s
resilience4j.retry.instances.search-service.max-attempts=2
resilience4j.retry.instances.search-service.wait-duration=500ms

# Time Limiter Configuration
resilience4j.timelimiter.instances.contact-service.timeout-duration=3s
resilience4j.timelimiter.instances.contact-service.cancel-running-future=true